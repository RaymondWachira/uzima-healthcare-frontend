<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uzima Healthcare - Smart Triage</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gradient-to-br from-teal-50 via-blue-50 to-indigo-100 min-h-screen">
    
    <!-- Choice Screen -->
    <div id="choice-screen" class="min-h-screen flex items-center justify-center px-4">
        <div class="max-w-2xl w-full">
            <div class="text-center mb-12">
                <div class="inline-block bg-white rounded-full p-6 mb-6 shadow-2xl">
                    <span class="text-6xl">ğŸ¥</span>
                </div>
                <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-3">Uzima Healthcare</h1>
                <p class="text-xl text-gray-600">Smart Triage System</p>
            </div>
            
            <div class="bg-white rounded-2xl shadow-2xl p-8 mb-6">
                <h2 class="text-2xl font-bold text-center mb-8 text-gray-800">How would you like to get started?</h2>
                
                <div class="space-y-4">
                    <button onclick="showChatInterface()" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition transform hover:scale-105 text-left group">
                        <div class="flex items-center">
                            <div class="bg-white rounded-full p-4 mr-4 group-hover:scale-110 transition">
                                <span class="text-4xl">ğŸ’¬</span>
                            </div>
                            <div class="flex-1">
                                <h3 class="text-xl font-bold mb-1">Chat with AI Assistant</h3>
                                <p class="text-purple-100 text-sm">Natural conversation â€¢ Smart questions â€¢ Personalized care</p>
                                <div class="mt-2">
                                    <span class="bg-white bg-opacity-20 text-xs px-3 py-1 rounded-full">âš¡ NEW!</span>
                                </div>
                            </div>
                            <div class="text-3xl opacity-50 group-hover:opacity-100 transition">â†’</div>
                        </div>
                    </button>
                    
                    <button onclick="showFormInterface()" class="w-full bg-gradient-to-r from-teal-500 to-blue-500 hover:from-teal-600 hover:to-blue-600 text-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition transform hover:scale-105 text-left group">
                        <div class="flex items-center">
                            <div class="bg-white rounded-full p-4 mr-4 group-hover:scale-110 transition">
                                <span class="text-4xl">ğŸ“‹</span>
                            </div>
                            <div class="flex-1">
                                <h3 class="text-xl font-bold mb-1">Fill Assessment Form</h3>
                                <p class="text-teal-100 text-sm">Quick form â€¢ Step-by-step â€¢ 2 minutes</p>
                            </div>
                            <div class="text-3xl opacity-50 group-hover:opacity-100 transition">â†’</div>
                        </div>
                    </button>
                </div>
            </div>
            
            <div class="text-center text-gray-600 text-sm">
                <p>ğŸ”’ Your information is secure and private</p>
            </div>
        </div>
    </div>
    
    <!-- Chat Interface -->
    <div id="chat-interface" class="hidden">
        <div class="bg-gradient-to-r from-purple-600 to-pink-600 shadow-lg">
            <div class="max-w-4xl mx-auto px-4 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <button onclick="backToChoice()" class="bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-2 rounded-lg mr-4 transition">
                            â† Back
                        </button>
                        <div class="bg-white rounded-full p-2 mr-3">
                            <span class="text-2xl">ğŸ¤–</span>
                        </div>
                        <div>
                            <h2 class="text-xl font-bold text-white">AI Health Assistant</h2>
                            <p class="text-purple-100 text-xs">Powered by Claude AI</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="max-w-4xl mx-auto px-4 py-6">
            <div id="chat-messages" class="bg-white rounded-xl shadow-xl p-6 mb-4 chat-messages-container"></div>
            
            <div class="bg-white rounded-xl shadow-xl p-4">
                <div class="flex gap-3">
                    <input type="text" id="chat-input" placeholder="Type your message..." class="flex-1 px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500" onkeypress="if(event.key==='Enter') sendMessage()"/>
                    <button onclick="sendMessage()" id="send-btn" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-lg font-bold hover:from-purple-600 hover:to-pink-600 transition">Send</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div id="main-content" class="hidden">
    
    <div class="bg-gradient-to-r from-teal-600 to-blue-600 shadow-lg">
        <div class="max-w-4xl mx-auto px-4 py-6">
            <div class="flex items-center justify-between flex-wrap">
                <div class="flex items-center">
                    <button onclick="backToChoice()" class="bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-2 rounded-lg mr-4 transition">â† Back</button>
                    <div class="bg-white rounded-full p-3 mr-4 shadow-lg">
                        <span class="text-4xl">ğŸ¥</span>
                    </div>
                    <div>
                        <h1 class="text-3xl font-bold text-white">Uzima Healthcare</h1>
                        <p class="text-teal-100 text-sm font-medium">Smart Triage System</p>
                        <p class="text-teal-200 text-xs">Fast, Accurate, Comprehensive</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="bg-gradient-to-r from-green-500 to-emerald-600 py-3">
        <div class="max-w-4xl mx-auto px-4">
            <div class="flex items-center justify-center gap-8 text-white text-sm font-semibold flex-wrap">
                <div class="flex items-center"><span class="text-2xl mr-2">âš¡</span><span>2 Min Assessment</span></div>
                <div class="flex items-center"><span class="text-2xl mr-2">ğŸ‘¥</span><span>40% Wait Reduction</span></div>
                <div class="flex items-center"><span class="text-2xl mr-2">ğŸ˜Š</span><span>Better Care</span></div>
            </div>
        </div>
    </div>

    <div class="max-w-4xl mx-auto px-4 py-8">
        
        <div id="returning-patient" class="mb-6 bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl shadow-lg p-6 border-2 border-purple-300">
            <div class="flex items-center mb-4">
                <span class="text-3xl mr-3">ğŸ‘‹</span>
                <div>
                    <p class="text-lg font-bold text-purple-900">Welcome Back!</p>
                    <p class="text-sm text-purple-700">Returning patient? Load your saved profile</p>
                </div>
            </div>
            <div class="flex gap-3">
                <input type="tel" id="returning-phone" placeholder="+254712345678" class="flex-1 px-4 py-3 border-2 border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500"/>
                <button onclick="loadUserProfile()" class="bg-purple-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-purple-700 transition">ğŸ“‚ Load Profile</button>
            </div>
            <p class="text-xs text-purple-600 mt-2">ğŸ’¡ First time? Fill the form below and save your profile for next time!</p>
        </div>

        <div id="demo-buttons" class="mb-6 bg-white rounded-xl shadow-lg p-6 border-t-4 border-teal-500">
            <div class="flex items-center mb-4">
                <span class="text-2xl mr-3">ğŸ¯</span>
                <div>
                    <p class="text-lg font-bold text-gray-800">Quick Demo</p>
                    <p class="text-sm text-gray-600">See how Uzima routes different cases</p>
                </div>
            </div>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                <button onclick="loadDemo(0)" class="px-4 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg hover:from-purple-600 hover:to-purple-700 transition font-medium shadow-md hover:shadow-lg transform hover:scale-105"><div class="text-2xl mb-1">ğŸ‘©</div><div class="text-xs">UTI Case</div></button>
                <button onclick="loadDemo(1)" class="px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 transition font-medium shadow-md hover:shadow-lg transform hover:scale-105"><div class="text-2xl mb-1">ğŸš¨</div><div class="text-xs">Emergency</div></button>
                <button onclick="loadDemo(2)" class="px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition font-medium shadow-md hover:shadow-lg transform hover:scale-105"><div class="text-2xl mb-1">ğŸ </div><div class="text-xs">Self-Care</div></button>
                <button onclick="loadDemo(3)" class="px-4 py-3 bg-gradient-to-r from-yellow-500 to-yellow-600 text-white rounded-lg hover:from-yellow-600 hover:to-yellow-700 transition font-medium shadow-md hover:shadow-lg transform hover:scale-105"><div class="text-2xl mb-1">ğŸ‘¨â€âš•ï¸</div><div class="text-xs">Complex</div></button>
            </div>
        </div>

        <div id="triage-form-container" class="bg-white rounded-xl shadow-xl p-8 fade-in border-t-4 border-teal-500">
            <div class="mb-6 text-center">
                <div class="inline-block bg-teal-100 rounded-full p-4 mb-4">
                    <span class="text-5xl">ğŸ“‹</span>
                </div>
                <h2 class="text-3xl font-bold text-gray-900 mb-2">Patient Assessment</h2>
                <p class="text-gray-600">Complete core fields in 2 minutes</p>
                <div class="mt-4 inline-block bg-blue-50 px-4 py-2 rounded-lg">
                    <p class="text-sm text-blue-800">â±ï¸ Core: <strong>2 minutes</strong> | Optional: <strong>+1 minute</strong></p>
                </div>
            </div>

            <form id="triage-form" class="space-y-6">
                
                <div class="bg-gradient-to-r from-green-400 to-teal-500 text-white p-4 rounded-lg text-center">
                    <p class="font-bold text-lg">âš¡ Fast Track Triage</p>
                    <p class="text-sm">Answer core questions below | Optional details can be added after</p>
                </div>

                <div class="border-l-4 border-teal-600 pl-6 bg-teal-50 p-6 rounded-lg">
                    <h3 class="text-2xl font-bold text-teal-900 mb-6 flex items-center"><span class="text-3xl mr-3">ğŸ¥</span>Essential Information</h3>
                    
                    <div class="mb-4">
                        <label for="phone" class="block text-sm font-semibold text-gray-700 mb-2">ğŸ“± Phone Number *</label>
                        <input type="tel" id="phone" name="phone" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition" placeholder="+254712345678" required/>
                    </div>

                    <div class="grid md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label for="patient-name" class="block text-sm font-semibold text-gray-700 mb-2">ğŸ‘¤ Full Name *</label>
                            <input type="text" id="patient-name" name="patient-name" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition" placeholder="e.g., Grace Wanjiru" required/>
                        </div>
                        <div>
                            <label for="patient-age" class="block text-sm font-semibold text-gray-700 mb-2">ğŸ‚ Age *</label>
                            <input type="number" id="patient-age" name="patient-age" min="0" max="120" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition" placeholder="e.g., 28" required/>
                        </div>
                    </div>

                    <div class="mb-4">
                        <label for="chief-complaint" class="block text-sm font-semibold text-gray-700 mb-2">ğŸ’¬ What brings you in today? *</label>
                        <textarea id="chief-complaint" name="chief-complaint" rows="4" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition" placeholder="Describe your main symptom or concern..." required></textarea>
                    </div>

                    <div class="mb-4">
                        <label for="duration" class="block text-sm font-semibold text-gray-700 mb-2">ğŸ“… How long have you had these symptoms? *</label>
                        <select id="duration" name="duration" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition" required>
                            <option value="" disabled selected>Select duration...</option>
                            <option value="less-than-1-hour">Less than 1 hour</option>
                            <option value="1-24-hours">1-24 hours</option>
                            <option value="1-7-days">1-7 days</option>
                            <option value="1-4-weeks">1-4 weeks</option>
                            <option value="more-than-1-month">More than 1 month</option>
                        </select>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-gray-700 mb-3">ğŸ“Š Severity Rating *</label>
                        <div class="grid grid-cols-3 gap-4">
                            <label class="cursor-pointer">
                                <input type="radio" name="severity" value="mild" class="peer hidden" required>
                                <div class="border-2 border-gray-300 peer-checked:border-green-500 peer-checked:bg-green-50 rounded-lg p-4 text-center transition hover:border-green-400">
                                    <div class="text-4xl mb-2">ğŸ˜Š</div>
                                    <div class="font-semibold text-green-700">Mild</div>
                                </div>
                            </label>
                            <label class="cursor-pointer">
                                <input type="radio" name="severity" value="moderate" class="peer hidden">
                                <div class="border-2 border-gray-300 peer-checked:border-yellow-500 peer-checked:bg-yellow-50 rounded-lg p-4 text-center transition hover:border-yellow-400">
                                    <div class="text-4xl mb-2">ğŸ˜</div>
                                    <div class="font-semibold text-yellow-700">Moderate</div>
                                </div>
                            </label>
                            <label class="cursor-pointer">
                                <input type="radio" name="severity" value="severe" class="peer hidden">
                                <div class="border-2 border-gray-300 peer-checked:border-red-500 peer-checked:bg-red-50 rounded-lg p-4 text-center transition hover:border-red-400">
                                    <div class="text-4xl mb-2">ğŸ˜£</div>
                                    <div class="font-semibold text-red-700">Severe</div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-3">âš ï¸ Emergency Warning Signs *</label>
                        <div class="bg-red-50 border-2 border-red-200 rounded-lg p-4">
                            <div class="space-y-2">
                                <label class="flex items-center cursor-pointer hover:bg-red-100 p-2 rounded">
                                    <input type="checkbox" name="red-flags" value="chest-pain" class="mr-3 w-4 h-4">
                                    <span class="text-sm">ğŸ’” Chest pain or pressure</span>
                                </label>
                                <label class="flex items-center cursor-pointer hover:bg-red-100 p-2 rounded">
                                    <input type="checkbox" name="red-flags" value="breathing" class="mr-3 w-4 h-4">
                                    <span class="text-sm">ğŸ˜®â€ğŸ’¨ Severe difficulty breathing</span>
                                </label>
                                <label class="flex items-center cursor-pointer hover:bg-red-100 p-2 rounded">
                                    <input type="checkbox" name="red-flags" value="confusion" class="mr-3 w-4 h-4">
                                    <span class="text-sm">ğŸ˜µ Confusion or altered consciousness</span>
                                </label>
                                <label class="flex items-center cursor-pointer hover:bg-red-100 p-2 rounded">
                                    <input type="checkbox" name="red-flags" value="bleeding" class="mr-3 w-4 h-4">
                                    <span class="text-sm">ğŸ©¸ Severe bleeding</span>
                                </label>
                                <label class="flex items-center cursor-pointer hover:bg-red-100 p-2 rounded">
                                    <input type="checkbox" name="red-flags" value="high-fever" class="mr-3 w-4 h-4">
                                    <span class="text-sm">ğŸŒ¡ï¸ Very high fever with confusion</span>
                                </label>
                                <label class="flex items-center cursor-pointer hover:bg-green-100 p-2 rounded border-t-2 border-green-200 mt-2 pt-2">
                                    <input type="checkbox" name="red-flags" value="none" class="mr-3 w-4 h-4">
                                    <span class="text-sm font-bold">âœ… None of these</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <details class="border-2 border-purple-300 rounded-lg bg-purple-50 hover:bg-purple-100 transition">
                    <summary class="cursor-pointer p-6 font-bold text-purple-900 flex items-center justify-between select-none">
                        <span class="flex items-center"><span class="text-2xl mr-3">â•</span><span>Additional Medical Information (Optional)</span></span>
                        <span class="text-sm text-purple-600 font-normal">Click to expand â€¢ Helps improve care</span>
                    </summary>
                    
                    <div class="p-6 space-y-6 bg-white border-t-2 border-purple-200">
                        
                        <div class="border-l-4 border-purple-500 pl-4">
                            <h4 class="font-bold text-lg text-gray-800 mb-4">ğŸ“‹ Personal Details</h4>
                            <div class="grid md:grid-cols-3 gap-4">
                                <div>
                                    <label for="gender" class="block text-sm font-semibold text-gray-700 mb-2">Gender</label>
                                    <select id="gender" name="gender" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                                        <option value="">Select...</option>
                                        <option value="male">Male</option>
                                        <option value="female">Female</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="weight" class="block text-sm font-semibold text-gray-700 mb-2">Weight (kg)</label>
                                    <input type="number" id="weight" name="weight" step="0.1" placeholder="65" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                                </div>
                                <div>
                                    <label for="height" class="block text-sm font-semibold text-gray-700 mb-2">Height (cm)</label>
                                    <input type="number" id="height" name="height" step="0.1" placeholder="165" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                                </div>
                            </div>
                            <div class="mt-4">
                                <label for="location" class="block text-sm font-semibold text-gray-700 mb-2">County/Location</label>
                                <input type="text" id="location" name="location" placeholder="e.g., Nairobi" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500">
                            </div>
                        </div>

                        <div class="border-l-4 border-blue-500 pl-4">
                            <h4 class="font-bold text-lg text-gray-800 mb-4">ğŸ¥ Medical History</h4>
                            <div class="space-y-4">
                                <div>
                                    <label for="allergies" class="block text-sm font-semibold text-gray-700 mb-2">Known Allergies</label>
                                    <textarea id="allergies" name="allergies" rows="2" placeholder="e.g., Penicillin, Peanuts" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"></textarea>
                                </div>
                                <div>
                                    <label for="medications" class="block text-sm font-semibold text-gray-700 mb-2">Current Medications</label>
                                    <textarea id="medications" name="medications" rows="2" placeholder="List any medications you're taking" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"></textarea>
                                </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Travel History (Last 14 Days)</label>
                                    <div class="flex gap-4 flex-wrap">
                                        <label class="flex items-center"><input type="radio" name="travel" value="no" class="mr-2" checked><span class="text-sm">No travel</span></label>
                                        <label class="flex items-center"><input type="radio" name="travel" value="domestic" class="mr-2"><span class="text-sm">Domestic</span></label>
                                        <label class="flex items-center"><input type="radio" name="travel" value="international" class="mr-2"><span class="text-sm">International</span></label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="border-l-4 border-green-500 pl-4">
                            <h4 class="font-bold text-lg text-gray-800 mb-4">ğŸ©º Symptom Details</h4>
                            <div>
                                <label for="body-location" class="block text-sm font-semibold text-gray-700 mb-2">Body Location</label>
                                <select id="body-location" name="body-location" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500">
                                    <option value="">Select area...</option>
                                    <option value="head">Head/Face</option>
                                    <option value="neck">Neck</option>
                                    <option value="chest">Chest</option>
                                    <option value="abdomen">Abdomen/Stomach</option>
                                    <option value="back">Back</option>
                                    <option value="arms">Arms/Hands</option>
                                    <option value="legs">Legs/Feet</option>
                                    <option value="skin">Skin (general)</option>
                                    <option value="multiple">Multiple areas</option>
                                    <option value="general">General/Whole body</option>
                                </select>
                            </div>
                        </div>

                    </div>
                </details>

                <button type="submit" id="submit-btn" class="w-full bg-gradient-to-r from-teal-600 to-blue-600 text-white py-4 px-6 rounded-lg font-bold text-lg hover:from-teal-700 hover:to-blue-700 transition transform hover:scale-105 shadow-xl disabled:opacity-50 disabled:cursor-not-allowed">
                    <span class="flex items-center justify-center"><span class="text-2xl mr-3">ğŸ”</span><span>Get Care Recommendation</span></span>
                </button>
            </form>
        </div>

        <div id="results" class="hidden"></div>
        
    </div>

    <div class="bg-gradient-to-r from-teal-600 to-blue-600 mt-12 py-8">
        <div class="max-w-4xl mx-auto px-4 text-center text-white">
            <div class="mb-4">
                <div class="inline-block bg-white rounded-full p-3 mb-2"><span class="text-3xl">ğŸ¥</span></div>
                <h3 class="text-2xl font-bold">Uzima Healthcare</h3>
                <p class="text-teal-100 text-sm">Fast, Smart, Comprehensive Triage</p>
            </div>
        </div>
    </div>

    </div>

    <script src="script.js"></script>
</body>
</html>